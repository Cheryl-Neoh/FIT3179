{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {
    "url": "https://cheryl-neoh.github.io/FIT3179/Assignment 2/Data/Malaysian-states.json",
    "format": {"type": "topojson", "feature": "states"}
  },
  "params": [
    {
      "name": "Current_Type",
      "value": "All Crime",
      "bind":{
          "input": "select", 
          "options": [
          "All Crime",
          "Murder",
          "Rape",
          "Robbery",
          "Harming",
          "Theft",
          "Drug addicts",
          "House break-ins"
          ],
          "name": "Type of crime: "
      }
    },
    {
    "name": "Current_Year",
    "value": 2017,
    "bind": {
      "input": "range",
      "min": 2017,
      "max": 2019,
      "step": 1,
      "name": "Year: "
    }
  }
  ],
  "title": {
    "text": "Crime rates around Malaysia",
    "fontSize": 18,
    "offset": 20
  },
  "width": 500,
  "height": 300,
  "selection": {
    "highlight": {"type": "multi", "empty": "none", "on": "mouseover"},
    "highlight1": {"type": "multi"}
  },
  "transform": [
    {
      "lookup": "id",
      "from": {
        "data": {
          "url": "https://cheryl-neoh.github.io/FIT3179/Assignment 2/Data/AllYearCrimeRatesWideFormat.csv"
        },
        "key": "id",
        "fields": [
          "2017All CrimeCases", 
          "2017All CrimeRate",
          "2017MurderCases",
          "2017MurderRate",
          "2017RapeCases",
          "2017RapeRate",
          "2017RobberyCases",
          "2017RobberyRate",
          "2017HarmingCases",
          "2017HarmingRate",
          "2017TheftCases",
          "2017TheftRate",
          "2017Drug addictsCases",
          "2017Drug addictsRate",
          "2017House break-insCases",
          "2017House break-insRate",
          "2018All CrimeCases",
          "2018All CrimeRate",
          "2018MurderCases",
          "2018MurderRate",
          "2018RapeCases",
          "2018RapeRate",
          "2018RobberyCases",
          "2018RobberyRate",
          "2018HarmingCases",
          "2018HarmingRate",
          "2018TheftCases",
          "2018TheftRate",
          "2018Drug addictsCases",
          "2018Drug addictsRate",
          "2018House break-insCases",
          "2018House break-insRate",
          "2019All CrimeCases",
          "2019All CrimeRate",
          "2019MurderCases",
          "2019MurderRate",
          "2019RapeCases",
          "2019RapeRate",
          "2019RobberyCases",
          "2019RobberyRate",
          "2019HarmingCases",
          "2019HarmingRate",
          "2019TheftCases",
          "2019TheftRate",
          "2019Drug addictsCases",
          "2019Drug addictsRate",
          "2019House break-insCases",
          "2019House break-insRate"]
      }
    },
    {
    "calculate": "datum[Current_Year+Current_Type+'Rate']",
    "as": "Rate per 100,000 people"
    }
  ],
  "projection": {"type": "equalEarth"},
  "mark": {"type": "geoshape", "stroke": "#757575", "strokeWidth": 0.8},
  "encoding": {
    "color": {
      "field": "Rate per 100,000 people",
      "type": "quantitative",
      "legend": {
        "title": ["Rate per", "100,000", "people"],
        "labelFontSize": 12,
        "titleFontSize": 12
      },
      "scale": {
      }
    },
    "tooltip": [
      {"field": "id", "type": "nominal", "title": "Country"},
      {"field": "Rate per 100,000 people", "type": "quantitative"}
    ],
    "strokeWidth": {
      "condition": [{"selection": "highlight", "value": 1}],
      "value": 0.3
    }
  },
  "config": {"background": "snow", "style": {"cell": {"stroke": "transparent"}}}
}
